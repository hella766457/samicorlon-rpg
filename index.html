<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>세미콜론 대군단</title>
<style>
  /* 전체 배경 */
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #e6f0ff;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
  }
  /* 메뉴, 로드맵 공통 박스 */
  .container {
    background-color: #ffffff;
    border: 4px solid #3399ff;
    border-radius: 15px;
    padding: 40px;
    text-align: center;
    box-shadow: 0 0 20px rgba(51,153,255,0.4);
    min-width: 300px;
    margin-top: 40px;
  }
  h1 {
    font-size: 2.2rem;
    margin-bottom: 30px;
  }
  button {
    font-size: 1.2rem;
    padding: 15px 30px;
    margin: 10px;
    border: none;
    border-radius: 10px;
    background-color: #3399ff;
    color: white;
    cursor: pointer;
    transition: background-color 0.2s;
  }
  button:hover {
    background-color: #2673bf;
  }
  #roadmap { display: none; }
  .stage-list {
    list-style-type: none;
    padding: 0;
  }
  .stage-list li {
    margin: 8px 0;
    font-size: 1.2rem;
    cursor: pointer;
    color: #3399ff;
  }
  .stage-list li:hover {
    text-decoration: underline;
  }
  /* 스토리 화면 */
  .story {
    display: none;
    position: relative;
    width: 80%;
    max-width: 800px;
    height: 70vh;
    margin-top: 40px;
    background-color: #ffffff;
    border: 4px solid #3399ff;
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(51,153,255,0.4);
    overflow: hidden;
    flex-direction: column;
  }
  .story-content {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 5rem;
    color: #3399ff;
    position: relative;
  }
  .big-symbol {
    display: none;
  }
  .dialogue-box {
    position: relative;
    background-color: rgba(0,0,0,0.7);
    color: #fff;
    padding: 20px;
    min-height: 150px;
  }
  .name-tag {
    display: inline-block;
    background-color: #3399ff;
    padding: 5px 10px;
    border-radius: 5px;
    margin-bottom: 10px;
    font-weight: bold;
    font-size: 1.1rem;
  }
  .dialogue-text {
    font-size: 1.2rem;
    line-height: 1.5;
    min-height: 60px;
    margin-bottom: 10px;
    /* 길이가 긴 대사도 자동 줄바꿈 */
    white-space: normal;
    word-wrap: break-word;
    overflow-wrap: anywhere;
  }
  .next-indicator {
    position: absolute;
    right: 20px;
    bottom: 15px;
    font-size: 1.5rem;
    cursor: pointer;
    display: none;
  }
</style>
</head>
<body>

  <!-- 메뉴 화면 -->
  <div class="container" id="menu">
    <h1>메뉴 화면</h1>
    <button id="roadmapBtn">로드맵</button>
  </div>

  <!-- 로드맵 화면 -->
  <div class="container" id="roadmap">
    <h1>로드맵</h1>
    <ul class="stage-list">
      <li id="stage-1-1">1-1</li>
      <li id="stage-1-2">1-2</li>
      <li id="stage-1-3">1-3</li>
      <li>2-1</li>
      <li>2-2</li>
      <li>2-3</li>
    </ul>
    <button id="backFromRoadmap">뒤로</button>
  </div>

  <!-- 1-1 스토리 화면 -->
  <div class="story" id="story-1-1">
    <div class="story-content">
      <div class="big-symbol" id="bigSymbol">@</div>
    </div>
    <div class="dialogue-box">
      <div class="name-tag" id="nameTag">관리자</div>
      <div class="dialogue-text" id="dialogueText"></div>
      <div class="next-indicator" id="nextIndicator">▶</div>
    </div>
  </div>

<script>
  const menuEl = document.getElementById('menu');
  const roadmapEl = document.getElementById('roadmap');
  const storyEl = document.getElementById('story-1-1');

  const roadmapBtn = document.getElementById('roadmapBtn');
  const backFromRoadmapBtn = document.getElementById('backFromRoadmap');
  const stage11Btn = document.getElementById('stage-1-1');
  const nameTag = document.getElementById('nameTag');
  const dialogueText = document.getElementById('dialogueText');
  const nextIndicator = document.getElementById('nextIndicator');
  const bigSymbol = document.getElementById('bigSymbol');

  // 대화 시나리오
  const dialogues = [
    { name: '관리자', text: '..여기가 어디지..?' },
    { name: '@ 대장', text: '아, 깨어나셨군요.' },
    { name: '의무병 @', text: '그렇군요. 긍정적인 상황입니다.' },
    { name: '관리자', text: '아니.. 여긴 어딥니까?' },
    { name: '의무병 @', text: '아무래도 기억을 잃은 듯 합니다.' },
    { name: '@ 대장', text: '괜찮습니다. 이곳은 저희 @ 기술소 의무병동이며, 대부분의 경우 안전합니다.' },
    { name: '관리자', text: '황급히 주변을 돌아보니, 정말로 곳곳에 하얀 침대와 치료기구가 보였다. 다만..' },
    { name: '', text: '모두가.. 기호 모양이었다..?', showSymbol: true },
    { name: '', text: '으..으아악!', hideSymbol: true },
    { name: '@ 대장', text: '.. 이러고 있을 시간이 없습니다. 저희 @가 괴멸당하기 직전인 상황입니다. 깨어난지 얼마 되지 않은 환자에게는 부당한 처사입니다만..' },
    { name: '@ 대장', text: '전투 지원을 요청합니다.' }
  ];

  let currentDialogueIndex = 0;
  let typingTimeout;
  let typingIndex;
  let currentText;

  // 메뉴 → 로드맵
  roadmapBtn.addEventListener('click', () => {
    menuEl.style.display = 'none';
    roadmapEl.style.display = 'block';
  });
  // 로드맵 → 메뉴
  backFromRoadmapBtn.addEventListener('click', () => {
    roadmapEl.style.display = 'none';
    menuEl.style.display = 'block';
  });
  // 1-1 클릭 → 스토리 시작
  stage11Btn.addEventListener('click', () => {
    roadmapEl.style.display = 'none';
    menuEl.style.display = 'none';
    storyEl.style.display = 'flex';
    currentDialogueIndex = 0;
    nextIndicator.style.display = 'none';
    bigSymbol.style.display = 'none';
    showDialogue();
  });
  // 화살표 클릭 → 다음 대화
  nextIndicator.addEventListener('click', () => {
    currentDialogueIndex++;
    showDialogue();
  });

  // 대화 표시
  function showDialogue() {
    if (currentDialogueIndex >= dialogues.length) {
      // 대화 끝 → 메뉴로 복귀
      storyEl.style.display = 'none';
      menuEl.style.display = 'block';
      return;
    }
    const dialog = dialogues[currentDialogueIndex];
    // 이름표 처리
    if (dialog.name && dialog.name !== '') {
      nameTag.textContent = dialog.name;
      nameTag.style.display = 'inline-block';
    } else {
      nameTag.style.display = 'none';
    }
    // 심볼 처리
    if (dialog.showSymbol) {
      bigSymbol.style.display = 'block';
    }
    if (dialog.hideSymbol) {
      bigSymbol.style.display = 'none';
    }
    // 타이핑 초기화
    clearTimeout(typingTimeout);
    typingIndex = 0;
    currentText = dialog.text;
    dialogueText.textContent = '';
    nextIndicator.style.display = 'none';
    typeWriter();
  }

  // 타이핑 효과
  function typeWriter() {
    if (typingIndex < currentText.length) {
      dialogueText.textContent += currentText.charAt(typingIndex);
      typingIndex++;
      typingTimeout = setTimeout(typeWriter, 40); // 타이핑 속도(ms)
    } else {
      nextIndicator.style.display = 'block';
    }
  }
</script>
</body>
</html>
